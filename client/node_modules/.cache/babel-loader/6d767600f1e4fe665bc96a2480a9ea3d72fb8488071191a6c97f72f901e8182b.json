{"ast":null,"code":"\"use strict\";\n\nvar _objectSpread = require(\"/Users/glebch/workprojects/baumna/client/node_modules/@babel/runtime/helpers/objectSpread2.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Admin = void 0;\nconst bson_1 = require(\"./bson\");\nconst execute_operation_1 = require(\"./operations/execute_operation\");\nconst list_databases_1 = require(\"./operations/list_databases\");\nconst remove_user_1 = require(\"./operations/remove_user\");\nconst run_command_1 = require(\"./operations/run_command\");\nconst validate_collection_1 = require(\"./operations/validate_collection\");\n/**\n * The **Admin** class is an internal class that allows convenient access to\n * the admin functionality and commands for MongoDB.\n *\n * **ADMIN Cannot directly be instantiated**\n * @public\n *\n * @example\n * ```ts\n * import { MongoClient } from 'mongodb';\n *\n * const client = new MongoClient('mongodb://localhost:27017');\n * const admin = client.db().admin();\n * const dbInfo = await admin.listDatabases();\n * for (const db of dbInfo.databases) {\n *   console.log(db.name);\n * }\n * ```\n */\nclass Admin {\n  /**\n   * Create a new Admin instance\n   * @internal\n   */\n  constructor(db) {\n    this.s = {\n      db\n    };\n  }\n  /**\n   * Execute a command\n   *\n   * The driver will ensure the following fields are attached to the command sent to the server:\n   * - `lsid` - sourced from an implicit session or options.session\n   * - `$readPreference` - defaults to primary or can be configured by options.readPreference\n   * - `$db` - sourced from the name of this database\n   *\n   * If the client has a serverApi setting:\n   * - `apiVersion`\n   * - `apiStrict`\n   * - `apiDeprecationErrors`\n   *\n   * When in a transaction:\n   * - `readConcern` - sourced from readConcern set on the TransactionOptions\n   * - `writeConcern` - sourced from writeConcern set on the TransactionOptions\n   *\n   * Attaching any of the above fields to the command will have no effect as the driver will overwrite the value.\n   *\n   * @param command - The command to execute\n   * @param options - Optional settings for the command\n   */\n  async command(command, options) {\n    var _options$timeoutMS;\n    return await (0, execute_operation_1.executeOperation)(this.s.db.client, new run_command_1.RunAdminCommandOperation(command, _objectSpread(_objectSpread({}, (0, bson_1.resolveBSONOptions)(options)), {}, {\n      session: options === null || options === void 0 ? void 0 : options.session,\n      readPreference: options === null || options === void 0 ? void 0 : options.readPreference,\n      timeoutMS: (_options$timeoutMS = options === null || options === void 0 ? void 0 : options.timeoutMS) !== null && _options$timeoutMS !== void 0 ? _options$timeoutMS : this.s.db.timeoutMS\n    })));\n  }\n  /**\n   * Retrieve the server build information\n   *\n   * @param options - Optional settings for the command\n   */\n  async buildInfo(options) {\n    return await this.command({\n      buildinfo: 1\n    }, options);\n  }\n  /**\n   * Retrieve the server build information\n   *\n   * @param options - Optional settings for the command\n   */\n  async serverInfo(options) {\n    return await this.command({\n      buildinfo: 1\n    }, options);\n  }\n  /**\n   * Retrieve this db's server status.\n   *\n   * @param options - Optional settings for the command\n   */\n  async serverStatus(options) {\n    return await this.command({\n      serverStatus: 1\n    }, options);\n  }\n  /**\n   * Ping the MongoDB server and retrieve results\n   *\n   * @param options - Optional settings for the command\n   */\n  async ping(options) {\n    return await this.command({\n      ping: 1\n    }, options);\n  }\n  /**\n   * Remove a user from a database\n   *\n   * @param username - The username to remove\n   * @param options - Optional settings for the command\n   */\n  async removeUser(username, options) {\n    return await (0, execute_operation_1.executeOperation)(this.s.db.client, new remove_user_1.RemoveUserOperation(this.s.db, username, _objectSpread({\n      dbName: 'admin'\n    }, options)));\n  }\n  /**\n   * Validate an existing collection\n   *\n   * @param collectionName - The name of the collection to validate.\n   * @param options - Optional settings for the command\n   */\n  async validateCollection(collectionName) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return await (0, execute_operation_1.executeOperation)(this.s.db.client, new validate_collection_1.ValidateCollectionOperation(this, collectionName, options));\n  }\n  /**\n   * List the available databases\n   *\n   * @param options - Optional settings for the command\n   */\n  async listDatabases(options) {\n    return await (0, execute_operation_1.executeOperation)(this.s.db.client, new list_databases_1.ListDatabasesOperation(this.s.db, _objectSpread({\n      timeoutMS: this.s.db.timeoutMS\n    }, options)));\n  }\n  /**\n   * Get ReplicaSet status\n   *\n   * @param options - Optional settings for the command\n   */\n  async replSetGetStatus(options) {\n    return await this.command({\n      replSetGetStatus: 1\n    }, options);\n  }\n}\nexports.Admin = Admin;","map":{"version":3,"names":["bson_1","require","execute_operation_1","list_databases_1","remove_user_1","run_command_1","validate_collection_1","Admin","constructor","db","s","command","options","_options$timeoutMS","executeOperation","client","RunAdminCommandOperation","_objectSpread","resolveBSONOptions","session","readPreference","timeoutMS","buildInfo","buildinfo","serverInfo","serverStatus","ping","removeUser","username","RemoveUserOperation","dbName","validateCollection","collectionName","arguments","length","undefined","ValidateCollectionOperation","listDatabases","ListDatabasesOperation","replSetGetStatus","exports"],"sources":["/Users/glebch/workprojects/baumna/client/node_modules/mongodb/src/admin.ts"],"sourcesContent":["import { type Document, resolveBSONOptions } from './bson';\nimport type { Db } from './db';\nimport type { CommandOperationOptions } from './operations/command';\nimport { executeOperation } from './operations/execute_operation';\nimport {\n  ListDatabasesOperation,\n  type ListDatabasesOptions,\n  type ListDatabasesResult\n} from './operations/list_databases';\nimport { RemoveUserOperation, type RemoveUserOptions } from './operations/remove_user';\nimport { RunAdminCommandOperation, type RunCommandOptions } from './operations/run_command';\nimport {\n  ValidateCollectionOperation,\n  type ValidateCollectionOptions\n} from './operations/validate_collection';\n\n/** @internal */\nexport interface AdminPrivate {\n  db: Db;\n}\n\n/**\n * The **Admin** class is an internal class that allows convenient access to\n * the admin functionality and commands for MongoDB.\n *\n * **ADMIN Cannot directly be instantiated**\n * @public\n *\n * @example\n * ```ts\n * import { MongoClient } from 'mongodb';\n *\n * const client = new MongoClient('mongodb://localhost:27017');\n * const admin = client.db().admin();\n * const dbInfo = await admin.listDatabases();\n * for (const db of dbInfo.databases) {\n *   console.log(db.name);\n * }\n * ```\n */\nexport class Admin {\n  /** @internal */\n  s: AdminPrivate;\n\n  /**\n   * Create a new Admin instance\n   * @internal\n   */\n  constructor(db: Db) {\n    this.s = { db };\n  }\n\n  /**\n   * Execute a command\n   *\n   * The driver will ensure the following fields are attached to the command sent to the server:\n   * - `lsid` - sourced from an implicit session or options.session\n   * - `$readPreference` - defaults to primary or can be configured by options.readPreference\n   * - `$db` - sourced from the name of this database\n   *\n   * If the client has a serverApi setting:\n   * - `apiVersion`\n   * - `apiStrict`\n   * - `apiDeprecationErrors`\n   *\n   * When in a transaction:\n   * - `readConcern` - sourced from readConcern set on the TransactionOptions\n   * - `writeConcern` - sourced from writeConcern set on the TransactionOptions\n   *\n   * Attaching any of the above fields to the command will have no effect as the driver will overwrite the value.\n   *\n   * @param command - The command to execute\n   * @param options - Optional settings for the command\n   */\n  async command(command: Document, options?: RunCommandOptions): Promise<Document> {\n    return await executeOperation(\n      this.s.db.client,\n      new RunAdminCommandOperation(command, {\n        ...resolveBSONOptions(options),\n        session: options?.session,\n        readPreference: options?.readPreference,\n        timeoutMS: options?.timeoutMS ?? this.s.db.timeoutMS\n      })\n    );\n  }\n\n  /**\n   * Retrieve the server build information\n   *\n   * @param options - Optional settings for the command\n   */\n  async buildInfo(options?: CommandOperationOptions): Promise<Document> {\n    return await this.command({ buildinfo: 1 }, options);\n  }\n\n  /**\n   * Retrieve the server build information\n   *\n   * @param options - Optional settings for the command\n   */\n  async serverInfo(options?: CommandOperationOptions): Promise<Document> {\n    return await this.command({ buildinfo: 1 }, options);\n  }\n\n  /**\n   * Retrieve this db's server status.\n   *\n   * @param options - Optional settings for the command\n   */\n  async serverStatus(options?: CommandOperationOptions): Promise<Document> {\n    return await this.command({ serverStatus: 1 }, options);\n  }\n\n  /**\n   * Ping the MongoDB server and retrieve results\n   *\n   * @param options - Optional settings for the command\n   */\n  async ping(options?: CommandOperationOptions): Promise<Document> {\n    return await this.command({ ping: 1 }, options);\n  }\n\n  /**\n   * Remove a user from a database\n   *\n   * @param username - The username to remove\n   * @param options - Optional settings for the command\n   */\n  async removeUser(username: string, options?: RemoveUserOptions): Promise<boolean> {\n    return await executeOperation(\n      this.s.db.client,\n      new RemoveUserOperation(this.s.db, username, { dbName: 'admin', ...options })\n    );\n  }\n\n  /**\n   * Validate an existing collection\n   *\n   * @param collectionName - The name of the collection to validate.\n   * @param options - Optional settings for the command\n   */\n  async validateCollection(\n    collectionName: string,\n    options: ValidateCollectionOptions = {}\n  ): Promise<Document> {\n    return await executeOperation(\n      this.s.db.client,\n      new ValidateCollectionOperation(this, collectionName, options)\n    );\n  }\n\n  /**\n   * List the available databases\n   *\n   * @param options - Optional settings for the command\n   */\n  async listDatabases(options?: ListDatabasesOptions): Promise<ListDatabasesResult> {\n    return await executeOperation(\n      this.s.db.client,\n      new ListDatabasesOperation(this.s.db, { timeoutMS: this.s.db.timeoutMS, ...options })\n    );\n  }\n\n  /**\n   * Get ReplicaSet status\n   *\n   * @param options - Optional settings for the command\n   */\n  async replSetGetStatus(options?: CommandOperationOptions): Promise<Document> {\n    return await this.command({ replSetGetStatus: 1 }, options);\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}